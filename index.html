<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Totalizador De Ventas</title>
</head>
<body>
    <h1>Totalizador De Ventas</h1>

    <h2>Cantidad de Items</h2>
    <label for="cantidad">Ingrese número:</label>
    <input type="number" id="cantidad" />
    <button onclick="mostrarCantidad()">Mostrar</button>
    <p id="resultadoCantidad"></p>

    <h2>Precio por Item</h2>
    <label for="precio">Ingrese Precio del Item:</label>
    <input type="number" id="precio" />
    <button onclick="mostrarPrecio()">Mostrar</button>
    <p id="resultadoPrecio"></p>

    <h2>Seleccione el Estado</h2>
    <label for="estado">Estado:</label>
    <select id="estado">
        <option value="">Seleccione un estado</option>
        <option value="UT">Utah (UT)</option>
        <option value="NV">Nevada (NV)</option>
        <option value="TX">Texas (TX)</option>
        <option value="AL">Alabama (AL)</option>
        <option value="CA">California (CA)</option>
    </select>
    <button onclick="mostrarEstado()">Mostrar</button>
    <p id="resultadoEstado"></p>

    <h2>Precio Neto</h2>
    <button onclick="calcularTotal()">Calcular Precio Neto</button>
    <p id="resultadoTotal"></p>

    <h2>Total con Impuesto</h2>
    <button onclick="calcularTotalConImpuesto()">Calcular Total con Impuesto</button>
    <p id="resultadoTotalImpuesto"></p>

    <h2>Descuento</h2>
    <label for="descuento">Ingrese porcentaje de descuento:</label>
    <input type="number" id="descuento" />
    <button onclick="calcularTotalConDescuento()">Calcular Total con Descuento</button>
    <p id="resultadoDescuento"></p>

    <script type="module">
        import { precioneto } from './src/precioneto.js';
        import porcentajedeimpuesto from './src/porcentajedeimpuestos.js';
        import { calcularPrecioConDescuento, calcularPrecioTotalConDescuento } from './src/descuento.js';

        function mostrarCantidad() {
            let cantidad = document.getElementById("cantidad").value;
            document.getElementById("resultadoCantidad").innerText = "Cantidad ingresada: " + cantidad;
        }

        function mostrarPrecio() {
            let precio = document.getElementById("precio").value;
            document.getElementById("resultadoPrecio").innerText = "Precio ingresado: $" + precio;
        }

        function mostrarEstado() {
            let estado = document.getElementById("estado").value;
            if (estado) {
                document.getElementById("resultadoEstado").innerText = "Estado seleccionado: " + estado;
            } else {
                document.getElementById("resultadoEstado").innerText = "Seleccione un estado.";
            }
        }

        function calcularTotal() {
            let cantidad = parseFloat(document.getElementById("cantidad").value);
            let precio = parseFloat(document.getElementById("precio").value);
            if (!isNaN(cantidad) && !isNaN(precio)) {
                let total = precioneto(cantidad, precio);
                document.getElementById("resultadoTotal").innerText = "Total a pagar: $" + total.toFixed(2);
            } else {
                document.getElementById("resultadoTotal").innerText = "Ingrese valores válidos.";
            }
        }

        function calcularTotalConImpuesto() {
            let cantidad = parseFloat(document.getElementById("cantidad").value);
            let precio = parseFloat(document.getElementById("precio").value);
            let estado = document.getElementById("estado").value;

            if (!isNaN(cantidad) && !isNaN(precio) && estado) {
                let total = precioneto(cantidad, precio);
                let impuesto = porcentajedeimpuesto(total, estado);
                let totalConImpuesto = total + impuesto;
                
                document.getElementById("resultadoTotalImpuesto").innerText =
                    `Total con impuesto: $${totalConImpuesto.toFixed(2)} (Impuesto: $${impuesto.toFixed(2)})`;
            } else {
                document.getElementById("resultadoTotalImpuesto").innerText = "Ingrese valores válidos y seleccione un estado.";
            }
        }

        function calcularTotalConDescuento() {
            let cantidad = parseFloat(document.getElementById("cantidad").value);
            let precio = parseFloat(document.getElementById("precio").value);
            let porcentajeDescuento = parseFloat(document.getElementById("descuento").value);
            let estado = document.getElementById("estado").value;

            if (!isNaN(cantidad) && !isNaN(precio) && porcentajeDescuento >= 0 && estado) {
                let totalNeto = precioneto(cantidad, precio);
                let impuesto = porcentajedeimpuesto(totalNeto, estado);
                let totalConDescuento = calcularPrecioTotalConDescuento(totalNeto, impuesto, porcentajeDescuento);

                document.getElementById("resultadoDescuento").innerText = 
                    `Total con descuento: $${totalConDescuento.toFixed(2)} (Descuento: ${porcentajeDescuento}%)`;
            } else {
                document.getElementById("resultadoDescuento").innerText = "Ingrese valores válidos, descuento y estado.";
            }
        }

        window.mostrarCantidad = mostrarCantidad;
        window.mostrarPrecio = mostrarPrecio;
        window.mostrarEstado = mostrarEstado;
        window.calcularTotal = calcularTotal;
        window.calcularTotalConImpuesto = calcularTotalConImpuesto;
        window.calcularTotalConDescuento = calcularTotalConDescuento;
    </script>
</body>
</html>
